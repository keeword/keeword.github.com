---
layout: post
title: 现代操作系统笔记：进程与线程
category: os
tags: [os, process, thread]
---

# 进程

*进程(process)* 是程序在系统中的一个运行实例。

## 进程的创建

有四种原因会导致进程的创建：

1. 系统初始化
2. 某进程通过 *系统调用(system call)* 创建子进程
3. 用户创建新进程
4. 一个批处理作业的初始化

实质上，新进程都是由已有进程通过 *系统调用* 而创建的。

## 进程的结束

进程的结束通常由以下四种原因引起：

1. 完成工作，正常退出
2. 遇到错误，自行退出
3. 程序错误，被迫结束
4. 被其他进程杀死

第二和第三种并不一样。
第二种是程序检测到错误（如输入参数错误等），自行退出。
而第三种是系统检测到错误（如除以0等），然后杀死进程。
但也有系统是把错误信号发给进程，让其处理，而不是直接杀死进程。

## 进程的层次

所有的新进程都是由旧进程创建，通常把它们分别称为 *子进程* 和 *父进程* 。
在类Unix系统中，所有进程都是构成以 `init` 为根的一棵树。

## 进程的状态

一般而言，进程都会有三种基本的状态：

1. *运行(running)*  正在CPU上运行
2. *就绪(ready)*    已经准备好可以运行
3. *阻塞(blocked)*  等待某件事情发生后才可以运行，也叫 *等待(waiting)*

进程在不同状态的转换如下图所示：

![进程状态转换图](/img/process.png)
